FROM php:7-apache

# install app dependencies
RUN apt clean
RUN apt update
RUN apt install -y wget tar gzip nano zip libzip-dev
RUN docker-php-ext-install zip
RUN mv "$PHP_INI_DIR/php.ini-development" "$PHP_INI_DIR/php.ini"
RUN a2enmod rewrite
RUN wget https://github.com/WonderCMS/wondercms/archive/refs/tags/3.2.0.tar.gz -O /var/www/html/wondershare.tgz 
RUN tar -xvzf /var/www/html/wondershare.tgz
RUN ln -s /var/www/html/wondercms-* /var/www/html/wondercms
RUN rm /var/www/html/wondershare.tgz
RUN chown www-data:www-data /var/www/html/* -R
RUN echo "Disabling wondercms-updatecheck"
RUN sed -i 's/if ($onlineVersion > VERSION) {/return; \/* << disabled updatecheck*\/ if ($onlineVersion > VERSION) {/' /var/www/html/wondercms/index.php
EXPOSE 80
 
